[gd_scene load_steps=37 format=3 uid="uid://8g7kfpku1toy"]

[ext_resource type="Script" path="res://game/Pop.gd" id="1_47122"]
[ext_resource type="Texture2D" uid="uid://dryw871auxpmn" path="res://textures/POP STAVLJA.png" id="2_6s8in"]
[ext_resource type="FontFile" uid="uid://b2esb7n31e5ih" path="res://ui/fonts/Freshman.ttf" id="3_1hhca"]
[ext_resource type="Texture2D" uid="uid://dhxnvkwhjgx1s" path="res://textures/BEBA VISI.png" id="3_tdy0c"]
[ext_resource type="Texture2D" uid="uid://cuppx04dnphfa" path="res://textures/BEBA SEDI.png" id="4_qultv"]
[ext_resource type="Texture2D" uid="uid://cggm6jgidq7r5" path="res://textures/STO ZA BEBU.png" id="5_5bnvx"]
[ext_resource type="Shader" path="res://game/bebashader.gdshader" id="5_niwls"]
[ext_resource type="Texture2D" uid="uid://blf315kml677k" path="res://textures/background.png" id="7_1skec"]
[ext_resource type="Texture2D" uid="uid://qb4i8qd3ge2g" path="res://textures/PREDNJA_UMOCILICA.png" id="9_5fuft"]
[ext_resource type="Texture2D" uid="uid://bkqfrnv6udju3" path="res://textures/ZADDNJA_UMOCILICA.png" id="10_7mlnn"]
[ext_resource type="Script" path="res://game/Indicator.gd" id="10_hjbfl"]
[ext_resource type="Texture2D" uid="uid://cchni3te30boj" path="res://textures/buttons/PUNA_STRELICA.png" id="10_pergn"]
[ext_resource type="Texture2D" uid="uid://c1ksulofsduws" path="res://textures/buttons/BLANK_BTN.png" id="11_5w1v6"]
[ext_resource type="Script" path="res://game/MainMenu.gd" id="11_65x11"]
[ext_resource type="Texture2D" uid="uid://cbo8m28j7ajjl" path="res://textures/buttons/BELI_OUTLINE_STRELICA.png" id="11_jkcqr"]
[ext_resource type="Texture2D" uid="uid://dabpxlub52lib" path="res://textures/buttons/HOME_BTN.png" id="12_ncivn"]
[ext_resource type="Texture2D" uid="uid://b148kivcbh5mo" path="res://textures/buttons/ANDJEO_BEBA.png" id="14_dx3ls"]
[ext_resource type="Texture2D" uid="uid://dl1w4lvb4bv21" path="res://textures/buttons/RELOAD_BTN.png" id="14_ux28w"]
[ext_resource type="Texture2D" uid="uid://cu4ximd171ho2" path="res://textures/buttons/DJAVO_BEBA.png" id="15_16dh5"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_bwdna"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_kbwst"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_iwpob"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_jc8dr"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_uu8ry"]

[sub_resource type="Theme" id="Theme_2c27w"]
default_font = ExtResource("3_1hhca")
default_font_size = 48
Button/styles/disabled = SubResource("StyleBoxEmpty_bwdna")
Button/styles/focus = SubResource("StyleBoxEmpty_kbwst")
Button/styles/hover = SubResource("StyleBoxEmpty_iwpob")
Button/styles/normal = SubResource("StyleBoxEmpty_jc8dr")
Button/styles/pressed = SubResource("StyleBoxEmpty_uu8ry")

[sub_resource type="FastNoiseLite" id="FastNoiseLite_harvr"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_2wnnt"]
noise = SubResource("FastNoiseLite_harvr")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_yfktu"]
shader = ExtResource("5_niwls")
shader_parameter/t = 1.0
shader_parameter/noise = SubResource("NoiseTexture2D_2wnnt")

[sub_resource type="Shader" id="Shader_4jcpv"]
code = "shader_type canvas_item;
uniform float t: hint_range(0.0,1.0) = 0.0;
void vertex() {
	VERTEX.x *= pow(t,0.5);
	VERTEX.y *= pow(t,1.0/6.0);
}

void fragment() {
	// Called for every pixel the material is visible on.
}
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_jbjjv"]
shader = SubResource("Shader_4jcpv")
shader_parameter/t = 0.0

[sub_resource type="Curve" id="Curve_8h1jl"]
_data = [Vector2(0, 0.989011), 0.0, 0.0, 0, 0, Vector2(0.331897, 0.659341), 0.0, 0.0, 0, 0, Vector2(0.978448, 0), 1.79004, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_p20xd"]
curve = SubResource("Curve_8h1jl")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_7kcg1"]
particle_flag_disable_z = true
emission_shape = 3
emission_box_extents = Vector3(249.335, 156.765, 1)
spread = 180.0
initial_velocity_min = 542.2
initial_velocity_max = 1947.6
gravity = Vector3(0, 311.395, 0)
scale_min = 9.75
scale_max = 9.85
scale_curve = SubResource("CurveTexture_p20xd")
color = Color(0, 0.698039, 0.952941, 0.839216)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_gb0n7"]
size = Vector2(965, 62)

[sub_resource type="LabelSettings" id="LabelSettings_exm5c"]
font = ExtResource("3_1hhca")
font_size = 36

[sub_resource type="GDScript" id="GDScript_pn5h4"]
script/source = "extends Node2D

@export var font: Font

func _ready():
	Beat.indicators = self


func _draw():
	Beat.draw_tiles()


func draw_indicator(beat: float, key: int):
	var tex = preload(\"res://textures/buttons/STRELICA_SA_CRTOM.png\")
	var diff = Beat.beat_to_time(Beat.current_beat-beat)
	var y_position = diff*Beat.indicator_speed
	var pos = Vector2(0.0,y_position)
	var rot = 0.0
	match key:
		KEY_UP: rot = PI/2.0
		KEY_DOWN: rot = -PI/2.0
		KEY_LEFT: rot = 0.0
		KEY_RIGHT: rot = PI
	draw_set_transform(pos,rot,Vector2.ONE)
	draw_texture_rect(tex,Rect2(Vector2(-32,-32),Vector2(64,64)),false)

"

[node name="Game" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = SubResource("Theme_2c27w")

[node name="Levo" type="Control" parent="."]
clip_contents = true
layout_mode = 1
anchor_right = 0.667
anchor_bottom = 1.0
grow_vertical = 2
size_flags_horizontal = 3

[node name="Label" type="Label" parent="Levo"]
layout_mode = 0
offset_left = 374.0
offset_top = 253.0
offset_right = 623.0
offset_bottom = 399.0
text = "Idle"

[node name="Pop" type="Node2D" parent="Levo"]
position = Vector2(447.07, 345)
script = ExtResource("1_47122")
completed_label_path = NodePath("../Completed")
failed_label_path = NodePath("../Failed")

[node name="Pop" type="Sprite2D" parent="Levo/Pop"]
position = Vector2(-25, 15)
scale = Vector2(0.2, 0.2)
texture = ExtResource("2_6s8in")

[node name="HoldBeba" type="Sprite2D" parent="Levo/Pop/Pop"]
visible = false
position = Vector2(300, -365)
scale = Vector2(0.5, 0.5)
texture = ExtResource("3_tdy0c")

[node name="DipBeba" type="Sprite2D" parent="Levo/Pop/Pop"]
z_index = 1
position = Vector2(195, 400)
scale = Vector2(0.5, 0.5)
texture = ExtResource("3_tdy0c")

[node name="HoldBeba2" type="Sprite2D" parent="Levo/Pop/Pop"]
visible = false
z_index = 2
position = Vector2(-694.21, 242.565)
rotation = 1.06465
scale = Vector2(0.5, 0.5)
skew = 0.366519
texture = ExtResource("3_tdy0c")

[node name="BabyThrowPos" type="Marker2D" parent="Levo/Pop/Pop"]
position = Vector2(260, -900)

[node name="Sto" type="Sprite2D" parent="Levo/Pop"]
position = Vector2(185, 166)
scale = Vector2(0.1, 0.1)
texture = ExtResource("5_5bnvx")

[node name="Beba" type="Sprite2D" parent="Levo/Pop/Sto"]
material = SubResource("ShaderMaterial_yfktu")
position = Vector2(-190, -1180)
texture = ExtResource("4_qultv")

[node name="Sto2" type="Sprite2D" parent="Levo/Pop"]
position = Vector2(-184.62, 166)
scale = Vector2(0.1, 0.1)
texture = ExtResource("5_5bnvx")

[node name="Beba" type="Sprite2D" parent="Levo/Pop/Sto2"]
material = SubResource("ShaderMaterial_jbjjv")
position = Vector2(50, -855.74)
rotation = 0.689405
skew = 0.671952
texture = ExtResource("3_tdy0c")

[node name="Background" type="Sprite2D" parent="Levo/Pop"]
z_index = -25
position = Vector2(208, -449)
scale = Vector2(0.52, 0.52)
texture = ExtResource("7_1skec")

[node name="Umocilica" type="Sprite2D" parent="Levo/Pop"]
z_index = 40
position = Vector2(8.71509, 194.045)
scale = Vector2(0.135, 0.135)
texture = ExtResource("9_5fuft")

[node name="DipParticles" type="GPUParticles2D" parent="Levo/Pop/Umocilica"]
z_index = 2
position = Vector2(0, -721.69)
emitting = false
amount = 143
process_material = SubResource("ParticleProcessMaterial_7kcg1")
one_shot = true
speed_scale = 1.95
explosiveness = 1.0

[node name="Sprite2D" type="Sprite2D" parent="Levo/Pop/Umocilica"]
z_as_relative = false
texture = ExtResource("10_7mlnn")

[node name="Pod" type="StaticBody2D" parent="Levo/Pop"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Levo/Pop/Pod"]
position = Vector2(36.86, 121.895)
shape = SubResource("RectangleShape2D_gb0n7")

[node name="Markers" type="Node2D" parent="Levo/Pop"]

[node name="Marker-1" type="Marker2D" parent="Levo/Pop/Markers"]
position = Vector2(170.795, -66.5)

[node name="Marker0" type="Marker2D" parent="Levo/Pop/Markers"]
position = Vector2(171.8, -68.275)

[node name="Marker1" type="Marker2D" parent="Levo/Pop/Markers"]
position = Vector2(168.365, -65.77)

[node name="Marker2" type="Marker2D" parent="Levo/Pop/Markers"]
position = Vector2(37.37, -121.87)

[node name="Marker3" type="Marker2D" parent="Levo/Pop/Markers"]
position = Vector2(9.49, 23.325)

[node name="Marker4" type="Marker2D" parent="Levo/Pop/Markers"]
position = Vector2(35.635, -121.92)

[node name="Marker5" type="Marker2D" parent="Levo/Pop/Markers"]
position = Vector2(-150.995, 33.615)

[node name="Indicator" type="Node2D" parent="Levo/Pop"]
z_index = 40
position = Vector2(168, 0)
script = ExtResource("10_hjbfl")

[node name="Arrow" type="Sprite2D" parent="Levo/Pop/Indicator"]
modulate = Color(0.741176, 0.360784, 0.360784, 1)
scale = Vector2(0.1, 0.1)
texture = ExtResource("10_pergn")

[node name="Outline" type="Sprite2D" parent="Levo/Pop/Indicator"]
scale = Vector2(0.1, 0.1)
texture = ExtResource("11_jkcqr")

[node name="Completed" type="Label" parent="Levo"]
layout_mode = 0
offset_left = 92.0
offset_top = 50.0
offset_right = 314.0
offset_bottom = 103.0
text = "0"
label_settings = SubResource("LabelSettings_exm5c")
vertical_alignment = 1

[node name="Icon" type="TextureRect" parent="Levo/Completed"]
layout_mode = 0
offset_left = -58.0
offset_right = -7.0
offset_bottom = 51.0
texture = ExtResource("14_dx3ls")
expand_mode = 1

[node name="Failed" type="Label" parent="Levo"]
layout_mode = 0
offset_left = 425.37
offset_top = 53.0
offset_right = 757.371
offset_bottom = 105.0
text = "0"
label_settings = SubResource("LabelSettings_exm5c")
horizontal_alignment = 2
vertical_alignment = 1

[node name="Icon" type="TextureRect" parent="Levo/Failed"]
layout_mode = 0
offset_left = 342.0
offset_right = 393.0
offset_bottom = 51.0
texture = ExtResource("15_16dh5")
expand_mode = 1

[node name="Desno" type="Control" parent="."]
clip_contents = true
layout_mode = 1
anchor_left = 0.667
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 0
grow_vertical = 2
size_flags_horizontal = 3

[node name="Gameplay" type="Control" parent="Desno"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_top = -64.0
grow_horizontal = 2
grow_vertical = 0

[node name="Indicators" type="Node2D" parent="Desno/Gameplay"]
script = SubResource("GDScript_pn5h4")
font = ExtResource("3_1hhca")

[node name="TextureRect" type="TextureRect" parent="Desno/Gameplay/Indicators"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -32.0
offset_top = -32.0
offset_right = 32.0
offset_bottom = 32.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("11_5w1v6")
expand_mode = 1
stretch_mode = 5

[node name="MainMenu" type="Control" parent="Desno"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 64.0
offset_top = 64.0
offset_right = -64.0
offset_bottom = -64.0
script = ExtResource("11_65x11")

[node name="VBoxContainer" type="VBoxContainer" parent="Desno/MainMenu"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 132.0
offset_right = -0.23999
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/separation = 40

[node name="PlayNormalModeButton" type="Button" parent="Desno/MainMenu/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 64
text = "Play"

[node name="Quit" type="Button" parent="Desno/MainMenu/VBoxContainer"]
layout_mode = 2
text = "Quit"

[node name="GameOver" type="Control" parent="Desno"]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Home" type="TextureButton" parent="Desno/GameOver"]
layout_mode = 1
anchors_preset = -1
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -96.0
offset_top = -96.0
offset_right = -32.0
offset_bottom = -32.0
grow_horizontal = 0
grow_vertical = 0
texture_normal = ExtResource("12_ncivn")
ignore_texture_size = true
stretch_mode = 5

[node name="Home2" type="TextureButton" parent="Desno/GameOver"]
layout_mode = 1
anchors_preset = -1
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 32.0
offset_top = -96.0
offset_right = 96.0
offset_bottom = -32.0
grow_vertical = 0
texture_normal = ExtResource("14_ux28w")
ignore_texture_size = true
stretch_mode = 5

[node name="Background" type="Sprite2D" parent="Desno"]
z_index = -25
position = Vector2(-373.76, 190)
rotation = -1.5708
scale = Vector2(0.439252, 0.439252)
texture = ExtResource("7_1skec")

[connection signal="pressed" from="Desno/MainMenu/VBoxContainer/PlayNormalModeButton" to="Desno/MainMenu" method="_on_play_normal_mode_button_pressed"]
[connection signal="pressed" from="Desno/MainMenu/VBoxContainer/Quit" to="Desno/MainMenu" method="_on_quit_pressed"]
